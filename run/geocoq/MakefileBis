# Generic Makefile to run Coqine

# Variables
DKCHECK      ?= dkcheck
DKDEP        ?= dkdep

COQINEPATH=../../src

DKS = $(wildcard pruned/*.dk)
DKOS = $(DKS:.dk=.dko)

.PHONY: all	depend check

.SUFFIXES: .dk .dko

all: $(DKOS)

# Generate the dependencies of [.dk] files
depend:
	$(DKDEP) -I pruned -I . pruned/*.dk > .depend

# Check and compile the generated [.dk]
check: $(DKOS) depend

%.dko: %.dk depend
	$(DKCHECK) -I pruned -I . --eta -e $<

-include .depend
